(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n){var r=e.data,o=e.handleCardClick,i=e.handleTrashButton,u=e.handleLikeButton;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cardId=r._id,this._userId=r.userId,this._cardOwnerId=r.owner._id,this._name=r.name,this._link=r.link,this._likesArray=r.likes,this._handleLikeButton=u,this._selectorTemplate=n,this._handleCardClick=o,this._handleTrashButton=i}var n,r;return n=t,(r=[{key:"_checkOwner",value:function(){this._isOwner=this._cardOwnerId===this._userId}},{key:"_getTemplateCard",value:function(){var t=document.querySelector(this._selectorTemplate).content.querySelector(".cards__item").cloneNode(!0);if(!this._isOwner){var e=t.querySelector(".cards__trash");t.removeChild(e)}return t}},{key:"_setEventListeners",value:function(){var t=this;this._btnLike=this.cardElement.querySelector(".cards__btn"),this._btnLike.addEventListener("click",(function(){return t._handleLikeButton(t)})),this._isOwner&&(this._btnTrash=this.cardElement.querySelector(".cards__trash"),this._btnTrash.addEventListener("click",(function(){return t._handleTrashButton(t)}))),this._cardImage=this.cardElement.querySelector(".cards__img"),this._cardImage.addEventListener("click",(function(){return t._handleCardClick()}))}},{key:"isLiked",value:function(){var t=this;return this._likesArray.some((function(e){return e._id===t._userId}))}},{key:"_toggleLikeButton",value:function(){this.isLiked()?this._btnLike.classList.add("cards__btn_active"):this._btnLike.classList.remove("cards__btn_active")}},{key:"setLikes",value:function(t){this._likesArray=t,this._likesAmount.textContent=this._likesArray.length,this._toggleLikeButton()}},{key:"_setData",value:function(){this.cardElement.querySelector(".cards__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._likesAmount.textContent=this._likesArray.length}},{key:"createCard",value:function(){return this._checkOwner(),this.cardElement=this._getTemplateCard(),this._likesAmount=this.cardElement.querySelector(".cards__likes-amount"),this._setEventListeners(),this._toggleLikeButton(),this._setData(),this.cardElement}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._config.inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._config.inputErrorClass),e.classList.remove(this._config.errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){return t._hideInputError(e)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var c=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}var f=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(e),this._profileJob=document.querySelector(n),this._profileAvatar=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{profileName:this._profileName.textContent,profileJob:this._profileJob.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar;e&&n&&(this._profileName.textContent=e,this._profileJob.textContent=n),r&&(this._profileAvatar.src=r)}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscCloseBind=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){var n=e.target.classList.contains("popup_opened"),r=e.target.classList.contains("popup__close");(n||r)&&t.close()}))}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscCloseBind)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscCloseBind)}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(r);if(o){var n=_(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._handleFormSubmit=r,e._form=e._popup.querySelector(".popup__form"),e._inputList=e._form.querySelectorAll(".popup__input"),e._submitButton=e._form.querySelector(".popup__button"),e._submitButtonDefaultText=e._submitButton.textContent,e}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"waitLoading",value:function(t){this._submitButton.textContent=void 0!==t?t:this._submitButtonDefaultText}},{key:"setEventListeners",value:function(){var t=this;v(_(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){v(_(u.prototype),"close",this).call(this),this._form.reset()}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(h);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},k.apply(this,arguments)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=O(r);if(o){var n=O(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImg=e._popup.querySelector(".popup__img"),e._popupTitle=e._popup.querySelector(".popup__img-title"),e}return e=u,(n=[{key:"open",value:function(t){var e=t.name,n=t.link;this._popupImg.src=n,this._popupTitle.alt=e,this._popupTitle.textContent=e,k(O(u.prototype),"open",this).call(this)}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(h);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},C.apply(this,arguments)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(r);if(o){var n=T(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n))._handleFormSubmit=r,e._form=e._popup.querySelector(".popup__form"),e}return e=u,(n=[{key:"setEventListeners",value:function(){var t=this;C(T(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._card)}))}},{key:"open",value:function(t){this._card=t,C(T(u.prototype),"open",this).call(this)}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(h);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}var A=function(){function t(e){var n=e.url,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=n,this._headers=r}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._handleResponse)}},{key:"updateUserInfo",value:function(t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then(this._handleResponse)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(this._handleResponse)}},{key:"addNewCard",value:function(t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(this._handleResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"addLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"deleteLikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),x=".popup_type_profile-edit",V=".popup_type_add-card",D=".popup_type_edit-avatar",U=".profile__name",N=".profile__job",F=document.querySelector(".page"),J=F.querySelector(".profile__edit-btn"),G=F.querySelector(".profile__add-btn"),H=F.querySelector(".profile__avatar-edit-btn"),M=F.querySelector(x),z=F.querySelector(".popup__input_type_name"),$=F.querySelector(".popup__input_type_job"),K=(F.querySelector(U),F.querySelector(N),F.querySelector(D)),Q=F.querySelector(V),W={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible"};function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Y=new A({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"d07cac4a-a748-4986-b798-f3cab5a20c72","Content-Type":"application/json"}}),Z=null;Promise.all([Y.getInitialCards(),Y.getUserInfo()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Z=i._id,nt.setUserInfo(i),et.renderItems(o.reverse())})).catch((function(t){return console.log(t)}));var tt=function(t){return t.userId=Z,new n({data:t,handleCardClick:function(){it.open(t)},handleTrashButton:function(t){at.open(t)},handleLikeButton:function(t){t.isLiked()?Y.deleteLikeCard(t.cardId).then((function(e){t.setLikes(e.likes)})).catch((function(t){return console.log(t)})):Y.addLikeCard(t.cardId).then((function(e){t.setLikes(e.likes)})).catch((function(t){return console.log(t)}))}},"#cards-template").createCard()},et=new c({renderer:function(t){var e=tt(t);et.addItem(e)}},".cards__list"),nt=new f(U,N,".profile__avatar"),rt=new S({popupSelector:x,handleFormSubmit:function(t){rt.waitLoading("Сохранение..."),Y.updateUserInfo(t).then((function(){nt.setUserInfo(t)})).then((function(){rt.close()})).catch((function(t){return console.log(t)})).finally((function(){return rt.waitLoading()}))}});rt.setEventListeners(),J.addEventListener("click",(function(){var t;t=nt.getUserInfo(),z.value=t.profileName,$.value=t.profileJob,rt.open(),ct.resetValidation()}));var ot=new S({popupSelector:V,handleFormSubmit:function(t){ot.waitLoading("Сохранение..."),Y.addNewCard(t).then((function(t){var e=tt(t);et.addItem(e),ot.close()})).catch((function(t){return console.log(t)})).finally((function(){return ot.waitLoading()}))}});ot.setEventListeners(),G.addEventListener("click",(function(){st.disableSubmitButton(),ot.open(),st.resetValidation()}));var it=new j(".popup_type_image");it.setEventListeners();var ut=new S({popupSelector:D,handleFormSubmit:function(t){ut.waitLoading("Сохранение..."),Y.updateAvatar(t).then((function(){nt.setUserInfo(t)})).then((function(){ut.close()})).catch((function(t){return console.log(t)})).finally((function(){return ut.waitLoading()}))}});ut.setEventListeners(),H.addEventListener("click",(function(){ut.open(),lt.resetValidation()}));var at=new B({popupSelector:".popup_type_delete",handleFormSubmit:function(t){Y.deleteCard(t.cardId).then((function(){t.cardElement.remove(),t=null,at.close()})).catch((function(t){return console.log(t)}))}});at.setEventListeners();var ct=new i(W,M),lt=new i(W,K),st=new i(W,Q);ct.enableValidation(),lt.enableValidation(),st.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUcsT0FBS0MsUUFBUUMsSUFBSUYsRUFBSSxHQUN0QyxJQUVGTyxHQUFzQlcsb0JBR3RCLElBQU1FLEdBQW9CLElBQUlsSixFQUFjQyxFQUFRMEcsR0FFOUMrQyxHQUEwQixJQUFJMUosRUFBY0MsRUFBUTZHLEdBRXBEeUMsR0FBdUIsSUFBSXZKLEVBQWNDLEVBQVE4RyxHQUd2RG1DLEdBQWtCVSxtQkFDbEJGLEdBQXdCRSxtQkFDeEJMLEdBQXFCSyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g0LrQu9Cw0YHRgSBDYXJkINC+0YLQstC10YfQsNC10YIg0LfQsCDRgdC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3Ioe2RhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlVHJhc2hCdXR0b24sIGhhbmRsZUxpa2VCdXR0b259LCBzZWxlY3RvclRlbXBsYXRlKSB7XHJcbiAgICB0aGlzLmNhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklkID0gZGF0YS51c2VySWQ7XHJcbiAgICB0aGlzLl9jYXJkT3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlc0FycmF5ID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xyXG4gICAgdGhpcy5fc2VsZWN0b3JUZW1wbGF0ZSA9IHNlbGVjdG9yVGVtcGxhdGU7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVUcmFzaEJ1dHRvbiA9IGhhbmRsZVRyYXNoQnV0dG9uO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQv9GA0L7QstC10YDQutC4INGP0LLQu9GP0LXRgtGB0Y8g0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0YHQvtC30LTQsNGC0LXQu9C10Lwg0LrQsNGA0YLQvtGH0LrQuFxyXG4gIF9jaGVja093bmVyKCkge1xyXG4gICAgdGhpcy5faXNPd25lciA9ICh0aGlzLl9jYXJkT3duZXJJZCA9PT0gdGhpcy5fdXNlcklkKSA/IHRydWUgOiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vINC/0L7Qu9GD0YfQtdC90LjQtSDRiNCw0LHQu9C+0L3QsCDQutCw0YDRgtC+0YfQutC4XHJcbiAgX2dldFRlbXBsYXRlQ2FyZCgpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvclRlbXBsYXRlKVxyXG4gICAgICAuY29udGVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRzX19pdGVtJylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAgIC8vINGD0LTQsNC70LXQvdC40LUg0LjQtyDRiNCw0LHQu9C+0L3QsCDRjdC70LXQvNC10L3RgtCwINC60L7RgNC30LjQvdGLINC00LvRjyDQvdC1INGB0L7Qt9C00LDRgtC10LvRjyDQutCw0YDRgtC+0YfQutC4XHJcbiAgICAgIGlmKCF0aGlzLl9pc093bmVyKSB7XHJcbiAgICAgICAgY29uc3QgdHJhc2ggPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fdHJhc2gnKTtcclxuICAgICAgICBjYXJkLnJlbW92ZUNoaWxkKHRyYXNoKTtcclxuICAgICAgfVxyXG4gICAgcmV0dXJuIGNhcmQ7XHJcbiAgfVxyXG4gIFxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vINGB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60LggbGlrZVxyXG4gICAgdGhpcy5fYnRuTGlrZSA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fYnRuXCIpO1xyXG4gICAgdGhpcy5fYnRuTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcykpO1xyXG4gICAgXHJcbiAgICAvLyDRgdC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4INGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQtNC70Y8g0YHQvtC30LTQsNGC0LXQu9GPINC60LDRgNGC0L7Rh9C60LhcclxuICAgIGlmKHRoaXMuX2lzT3duZXIpIHtcclxuICAgICAgdGhpcy5fYnRuVHJhc2ggPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fdHJhc2gnKTtcclxuICAgICAgdGhpcy5fYnRuVHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVUcmFzaEJ1dHRvbih0aGlzKSk7IC8vINC/0LXRgNC10LTQsNGH0LAg0YLQtdC60YPRidC10Lkg0LrQsNGA0YLQvtGH0LrQuCDQsiDRhNGD0L3QutGG0LjRjiBcclxuICAgIH1cclxuXHJcbiAgICAvLyDRgdC70YPRiNCw0YLQtdC70Ywg0LrQu9C40LrQsCDQv9C+INC40LfQvtCx0YDQsNC20LXQvdC40Y5cclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19pbWcnKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljaygpKTsgIFxyXG4gIH1cclxuICBcclxuICAvLyDQvNC10YLQvtC0INC/0YDQvtCy0LXRgNC60Lgg0L3QsNC70LjRh9C40Y8g0LvQsNC50LrQsCDQvtGCINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXNBcnJheS5zb21lKChsaWtlVXNlcnMpID0+IHtcclxuICAgICAgcmV0dXJuIGxpa2VVc2Vycy5faWQgPT09IHRoaXMuX3VzZXJJZDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAvLyDQv9C10YDQtdC60LvRjtGH0LDRgtC10LvRjCDQutC90L7Qv9C60LggbGlrZVxyXG4gIF90b2dnbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgaWYodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fYnRuTGlrZS5jbGFzc0xpc3QuYWRkKFwiY2FyZHNfX2J0bl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idG5MaWtlLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkc19fYnRuX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8g0LzQtdGC0L7QtCDQvtCx0L3QvtCy0LvQtdC90LjRjyDQvNCw0YHRgdC40LLQsCDRgSDQu9Cw0LnQutCw0LzQuFxyXG4gIHNldExpa2VzKGRhdGFMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXNBcnJheSA9IGRhdGFMaWtlcztcclxuICAgIHRoaXMuX2xpa2VzQW1vdW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNBcnJheS5sZW5ndGg7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICAvLyDQvdCw0L/QvtC70L3QtdC90LjQtSDRiNCw0LHQu9C+0L3QsCDQutCw0YDRgtC+0YfQutC4INC00LDQvdC90YvQvNC4XHJcbiAgX3NldERhdGEoKSB7XHJcbiAgICAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQvtC/0LjRgdCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuICAgIGNvbnN0IGNhcmROYW1lID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX3RpdGxlJyk7XHJcbiAgICBjYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDRgdGB0YvQu9C60Lgg0L3QsCDQuNC30L7QsdGA0LDQttC10L3QuNC1XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIC8vINC00L7QsdCw0LLQu9C10L3QuNC1INC60L7Qu9C40YfQtdGB0YLQstCwINC70LDQudC60L7QslxyXG4gICAgdGhpcy5fbGlrZXNBbW91bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0FycmF5Lmxlbmd0aFxyXG4gIH1cclxuICBcclxuICAvLyDRgdC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuICBjcmVhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2hlY2tPd25lcigpO1xyXG4gICAgdGhpcy5jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlQ2FyZCgpO1xyXG4gICAgdGhpcy5fbGlrZXNBbW91bnQgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fbGlrZXMtYW1vdW50JylcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCk7XHJcbiAgICB0aGlzLl9zZXREYXRhKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcbiAgXHJcbiAgLy8g0L/QvtC60LDQtyDRgdC+0L7QsdGJ0LXQvdC40Y8g0L7QsSDQvtGI0LjQsdC60LUg0LTQu9GPINC90LXQstCw0LvQuNC00L3QvtCz0L4gaW5wdXRcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINGB0LrRgNGL0YLQuNC1INGB0L7QvtCx0YnQtdC90LjRjyDQvtCxINC+0YjQuNCx0LrQtVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgLy8g0LLQsNC70LjQtNCw0YbQuNGPIGlucHV0XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQtdGB0YLRjCDQu9C4INCyINGE0L7RgNC80LUg0L3QtdCy0LDQu9C40LTQvdGL0LkgaW5wdXRcclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuICBcclxuICAvLyDRgdC00LXQu9Cw0YLRjCDQutC90L7Qv9C60YMg0L3QtdCw0LrRgtC40LLQvdC+0LlcclxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuICBcclxuICAvLyDRgdC00LXQu9Cw0YLRjCDQutC90L7Qv9C60YMg0LDQutGC0LjQstC90L7QuVxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8g0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuFxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcblxyXG4gICAgLy8g0LrQvdC+0L/QutCwINC+0YLQv9GA0LDQstC60Lgg0YTQvtGA0LzRi1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICBcclxuICAgIC8vINGD0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70LXQuSDQvdCwINCy0YHQtSBpbnB1dCDRhNC+0YDQvNGLXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDRgdCx0YDQvtGB0LAg0YHQvtC+0LHRidC10L3QuNC5INC+0LEg0L7RiNC40LHQutCw0YUg0YHQviDQstGB0LXRhSDQuNC90L/Rg9GC0L7QsiDRhNC+0YDQvNGLICBcclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyAvLyDRg9C/0YDQsNCy0LvQtdC90LjQtSDRgdC+0YHRgtC+0Y/QvdC40LXQvCDQutC90L7Qv9C60Lgg0YHQsNCx0LzQuNGC0LBcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkpOyAvLyDRgdC60YDRi9GC0LjQtSDQvtGI0LjQsdC+0LpcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufSIsIi8vINC60LvQsNGB0YEgU2VjdGlvbiDQvtGC0LLQtdGH0LDQtdGCINC30LAg0L7RgtGA0LjRgdC+0LLQutGDINGN0LvQtdC80LXQvdGC0L7QsiDQvdCwINGB0YLRgNCw0L3QuNGG0LUuIFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvLyDRhNGD0L3QutGG0LjRjywg0L7RgtCy0LXRh9Cw0Y7RidCw0Y8g0LfQsCDRgdC+0LfQtNCw0L3QuNC1INC4INC+0YLRgNC40YHQvtCy0LrRgyDQtNCw0L3QvdGL0YUg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vINC+0YLRgNC40YHQvtCy0LrQsCDQvNCw0YHRgdC40LLQsCDRjdC70LXQvNC10L3RgtC+0LJcclxuICByZW5kZXJJdGVtcyhjYXJkcykge1xyXG4gICAgY2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LTQvtCx0LDQstC70LXQvdC40LUgRE9NLdGN0LvQtdC80LXQvdGC0L7QsiDQsiDQutC+0L3RgtC10LnQvdC10YAgXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn0iLCIvLyDQutC70LDRgdGBIFVzZXJJbmZvINC+0YLQstC10YfQsNC10YIg0LfQsCDRg9C/0YDQsNCy0LvQtdC90LjQtSDQvtGC0L7QsdGA0LDQttC10L3QuNC10Lwg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JQcm9maWxlTmFtZSwgc2VsZWN0b3JQcm9maWxlSm9iLCBzZWxlY3RvclByb2ZpbGVBdmF0YXIpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclByb2ZpbGVOYW1lKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yUHJvZmlsZUpvYik7XHJcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclByb2ZpbGVBdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgcHJvZmlsZU5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBwcm9maWxlSm9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VySW5mbztcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0L/RgNC40L3QuNC80LDQtdGCINC90L7QstGL0LUg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0LjRhSDQvdCwINGB0YLRgNCw0L3QuNGG0YNcclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xyXG4gICAgaWYgKG5hbWUgJiYgYWJvdXQpIHtcclxuICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXZhdGFyKSB7XHJcbiAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gICAgfVxyXG4gIH1cclxufSAiLCIvLyDQutC70LDRgdGBIFBvcHVwINC+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0LrRgNGL0YLQuNC1INC4INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZUJpbmQgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDQutC70LDQstC40YjQtdC5IEVzY1xyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INC00L7QsdCw0LLQu9GP0LXRgiDRgdC70YPRiNCw0YLQtdC70Ywg0LrQu9C40LrQsCDQv9C+INC40LrQvtC90LrQtSDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDQuCDQvtCy0LXRgNC70LXRjlxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zdCBvdmVybGF5ID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpOyBcclxuICAgICAgY29uc3QgYnV0dG9uQ2xvc2UgPSBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJyk7IC8vINC60L3QvtC/0LrQsCAtINC60YDQtdGB0YLQuNC6XHJcbiAgICAgIFxyXG4gICAgICBpZiAob3ZlcmxheSB8fCBidXR0b25DbG9zZSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2VCaW5kKTsgLy8g0YPRgdGC0LDQvdC+0LLQutCwINGB0LvRg9GI0LDRgtC10LvRjyDQvdCw0LbQsNGC0LjRjyDQutC70LDQstC40YjQuCBFc2NcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2VCaW5kKTsgLy8g0YPQtNCw0LvQtdC90LjQtSDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsNC20LDRgtC40Y8g0LrQu9Cw0LLQuNGI0LggRXNjXHJcbiAgfVxyXG59IiwiLy8g0LrQu9Cw0YHRgSBQb3B1cFdpdGhGb3JtcyDQvtGC0LLQtdGH0LDQtdGCINC30LAg0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0YEg0YTQvtGA0LzQvtC5XHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybXMgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pe1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRGVmYXVsdFRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINC80LXRgtC+0LQg0YHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0LLRgdC10YUg0L/QvtC70LXQuSDRhNC+0YDQvNGLLlxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4gdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INC40LfQvNC10L3Rj9C10YIg0YLQtdC60YHRgiDQutC90L7Qv9C60Lgg0YHQsNCx0LzQuNGC0LAg0LLQviDQstGA0LXQvNGPINC+0LbQuNC00LDQvdC40Y8g0L7RgtCy0LXRgtCwINGB0LXRgNCy0LXRgNCwINC/0L7RgdC70LUg0L7RgtC/0YDQsNCy0LrQuCDQtNCw0L3QvdGL0YVcclxuICB3YWl0TG9hZGluZyhUZXh0QnV0dG9uKSB7XHJcbiAgICAvLyDQv9GA0L7QstC10YDQutCwINC/0LXRgNC10LTQsNC9INC70Lgg0L/QsNGA0LDQvNC10YLRgFxyXG4gICAgaWYodHlwZW9mIFRleHRCdXR0b24gIT09ICd1bmRlZmluZWQnKXsgXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFRleHRCdXR0b247IC8vINC40LfQvNC10L3QtdC90LjQtSDRgtC10LrRgdGC0LAg0LrQvdC+0L/QutC4INC90LAg0L3QvtCy0L7QtVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uRGVmYXVsdFRleHQ7IC8vINCy0L7Qt9Cy0YDQsNGJ0LXQvdC40LUg0LjRgdGF0L7QtNC90L7Qs9C+INGC0LXQutGB0YLQsCDQutC90L7Qv9C60Lgg0L/QvtGB0LvQtSDQvtGC0LLQtdGC0LAg0YHQtdGA0LLQtdGA0LAgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIHdhaXRMb2FkaW5nKGlzTG9hZGluZywgVGV4dEJ1dHRvbikge1xyXG4gIC8vICAgaWYoaXNMb2FkaW5nKXsgXHJcbiAgLy8gICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFRleHRCdXR0b247XHJcbiAgLy8gICB9IGVsc2Uge1xyXG4gIC8vICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25EZWZhdWx0VGV4dDsgLy8g0LLQvtC30LLRgNCw0YnQtdC90LjQtSDQuNGB0YXQvtC00L3QvtCz0L4g0YLQtdC60YHRgtCwINC60L3QvtC/0LrQuCDQv9C+0YHQu9C1INC+0YLQstC10YLQsCDRgdC10YDQstC10YDQsCBcclxuICAvLyAgIH1cclxuICAvLyB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn0iLCIvLyDQutC70LDRgdGBIFBvcHVwV2l0aEltYWdlINC+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDRgSDQuNC30L7QsdGA0LDQttC10L3QuNC10LxcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1nID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZy10aXRsZScpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBJbWcuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsIi8vINC60LvQsNGB0YEgUG9wdXBXaXRoQ29uZmlybWF0aW9uINC+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fY2FyZCk7IC8vINC/0LXRgNC10LTQsNGH0LAg0LrQsNGA0YLQvtGH0LrQuCDQsiDQvtCx0YDQsNCx0L7RgtGH0LjQulxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmQpIHtcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkOyAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDRgdCy0L7QudGB0YLQstCwINGBINGC0LXQutGD0YnQtdC5INC60LDRgNGC0L7Rh9C60L7QuVxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyB1cmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0LLQtdGC0L7QsiDRgdC10YDQstC10YDQsFxyXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApOyBcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0LfQsNCz0YDRg9C30LrQuCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0YEg0YHQtdGA0LLQtdGA0LBcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INC+0LHQvdC+0LLQu9C10L3QuNGPINC/0YDQvtGE0LDQudC70LBcclxuICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INC+0LHQvdC+0LLQu9C10L3QuNGPINCw0LLQsNGC0LDRgNCwXHJcbiAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhclxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQt9Cw0LPRgNGD0LfQutC4INC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQvtGC0L/RgNCw0LLQutC4INC60LDRgNGC0L7Rh9C60Lgg0L3QsCDRgdC10YDQstC10YBcclxuICBhZGROZXdDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4INC90LAg0YHQtdGA0LLQtdGA0LVcclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQu9Cw0LnQutCwINC60LDRgNGC0L7Rh9C60LVcclxuICBhZGRMaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0YPQtNCw0LvQtdC90LjRjyDQu9Cw0LnQutCwINGBINC60LDRgNGC0L7Rh9C60LhcclxuICBkZWxldGVMaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjb25zdCBzZWxlY3RvclBvcHVwRm9ybUVkaXRQcm9maWxlID0gJy5wb3B1cF90eXBlX3Byb2ZpbGUtZWRpdCc7XHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvclBvcHVwRm9ybUFkZENhcmQgPSAnLnBvcHVwX3R5cGVfYWRkLWNhcmQnO1xyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JQb3B1cEZvcm1FZGl0QXZhdGFyID0gJy5wb3B1cF90eXBlX2VkaXQtYXZhdGFyJztcclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yUG9wdXBXaXRoQ29uZmlybWF0aW9uID0gJy5wb3B1cF90eXBlX2RlbGV0ZSc7XHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvclBvcHVwV2l0aEltYWdlID0gJy5wb3B1cF90eXBlX2ltYWdlJztcclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yQ2FyZFRlbXBsYXRlID0gJyNjYXJkcy10ZW1wbGF0ZSc7XHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvckNhcmRMaXN0ID0gJy5jYXJkc19fbGlzdCc7XHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvclByb2ZpbGVOYW1lID0gJy5wcm9maWxlX19uYW1lJztcclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yUHJvZmlsZUpvYiA9ICcucHJvZmlsZV9fam9iJztcclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9yUHJvZmlsZUF2YXRhciA9ICcucHJvZmlsZV9fYXZhdGFyJztcclxuXHJcbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xyXG5leHBvcnQgY29uc3QgYnRuRWRpdFByb2ZpbGUgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xyXG5leHBvcnQgY29uc3QgYnRuQWRkQ2FyZCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcclxuZXhwb3J0IGNvbnN0IGJ0bkVkaXRBdmF0YXIgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItZWRpdC1idG4nKTtcclxuXHJcbi8vINGE0L7RgNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5leHBvcnQgY29uc3QgZm9ybVByb2ZpbGVFZGl0ID0gcGFnZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yUG9wdXBGb3JtRWRpdFByb2ZpbGUpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpOyBcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfam9iJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IHBhZ2UucXVlcnlTZWxlY3RvcihzZWxlY3RvclByb2ZpbGVOYW1lKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2IgPSBwYWdlLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JQcm9maWxlSm9iKTtcclxuXHJcbi8vINGE0L7RgNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsFxyXG5leHBvcnQgY29uc3QgZm9ybUF2YXRhckVkaXQgPSBwYWdlLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JQb3B1cEZvcm1FZGl0QXZhdGFyKVxyXG5cclxuLy8g0YTQvtGA0LzQsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuZXhwb3J0IGNvbnN0IGZvcm1BZGRDYXJkID0gcGFnZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yUG9wdXBGb3JtQWRkQ2FyZCk7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xyXG59IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybXMgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb25cIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtcclxuICBzZWxlY3RvclBvcHVwV2l0aENvbmZpcm1hdGlvbixcclxuICBzZWxlY3RvclBvcHVwRm9ybUVkaXRQcm9maWxlLFxyXG4gIHNlbGVjdG9yUG9wdXBGb3JtRWRpdEF2YXRhcixcclxuICBzZWxlY3RvclBvcHVwRm9ybUFkZENhcmQsXHJcbiAgc2VsZWN0b3JQb3B1cFdpdGhJbWFnZSxcclxuICBzZWxlY3RvclByb2ZpbGVBdmF0YXIsXHJcbiAgc2VsZWN0b3JDYXJkVGVtcGxhdGUsXHJcbiAgc2VsZWN0b3JQcm9maWxlTmFtZSxcclxuICBzZWxlY3RvclByb2ZpbGVKb2IsXHJcbiAgc2VsZWN0b3JDYXJkTGlzdCxcclxuICBmb3JtUHJvZmlsZUVkaXQsXHJcbiAgZm9ybUF2YXRhckVkaXQsXHJcbiAgYnRuRWRpdFByb2ZpbGUsXHJcbiAgYnRuRWRpdEF2YXRhcixcclxuICBmb3JtQWRkQ2FyZCxcclxuICBidG5BZGRDYXJkLFxyXG4gIG5hbWVJbnB1dCxcclxuICBqb2JJbnB1dCxcclxuICBjb25maWcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy8g0YHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAgQVBJXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIHVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYwXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJkMDdjYWM0YS1hNzQ4LTQ5ODYtYjc5OC1mM2NhYjVhMjBjNzJcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxubGV0IHVzZXJJZCA9IG51bGw7IC8vIGlkINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG5cclxuLy8g0LfQsNCz0YDRg9C30LrQsCBjINGB0LXRgNCy0LXRgNCwINC60LDRgNGC0L7Rh9C10Log0Lgg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1LCDQuCDQvtGC0L7QsdGA0LDQttC10L3QuNC1INC40YUg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcclxuICAudGhlbigoW2luaXRpYWxDYXJkcywgdXNlckRhdGFdKSA9PiB7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7IC8vINC/0L7Qu9GD0YfQtdC90LjQtSBpZCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTsgLy8g0LTQvtCx0LDQstC70LXQvdC40LUg0LTQsNC90L3Ri9GFINC/0YDQvtGE0LjQu9GPINC90LAg0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzLnJldmVyc2UoKSk7IC8vINC+0YLRgNC40YHQvtCy0LrQsCDQutCw0YDRgtC+0YfQtdC6XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcblxyXG5cclxuLy8g0YTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoY2FyZERhdGEpID0+IHtcclxuICBjYXJkRGF0YS51c2VySWQgPSB1c2VySWQ7IC8vINC00L7QsdCw0LLQu9C10L3QuNC1INCyINC+0LHRitC10LrRgiBpZCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuXHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhOiBjYXJkRGF0YSxcclxuICAgICAgLy8g0L7QsdGA0LDQsdC+0YLRh9C40Log0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0YEg0LjQt9C+0LHRgNCw0LbQtdC90LjQtdC8XHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4oY2FyZERhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgSDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjQtdC8INGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG4gICAgICBoYW5kbGVUcmFzaEJ1dHRvbjogKGNhcmQpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24ub3BlbihjYXJkKTsgLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0Lgg0L/QtdGA0LXQtNCw0YfQsCDQsiDQvdC10LPQviDQutCw0YDRgtC+0YfQutC4IFxyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlQnV0dG9uOiAoY2FyZCkgPT4ge1xyXG4gICAgICAgIGlmKCFjYXJkLmlzTGlrZWQoKSkge1xyXG4gICAgICAgICAgYXBpLmFkZExpa2VDYXJkKGNhcmQuY2FyZElkKVxyXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5zZXRMaWtlcyhkYXRhLmxpa2VzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFwaS5kZWxldGVMaWtlQ2FyZChjYXJkLmNhcmRJZClcclxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXMoZGF0YS5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNlbGVjdG9yQ2FyZFRlbXBsYXRlXHJcbiAgICApO1xyXG4gIHJldHVybiBjYXJkLmNyZWF0ZUNhcmQoKTsgLy8g0YHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4XHJcbn07XHJcblxyXG4vLyDRgdC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNCwINC60LDRgNGC0L7Rh9C10Log0L/Qvi3Rg9C80L7Qu9GH0LDQvdC40Y5cclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTsgLy8g0LPQtdC90LXRgNCw0YbQuNGPINGA0LDQt9C80LXRgtC60Lgg0LrQsNGA0YLQvtGH0LrQuFxyXG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpOyAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4INCyINC60L7QvdGC0LXQudC90LXRgFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHNlbGVjdG9yQ2FyZExpc3RcclxuKTtcclxuXHJcblxyXG4vLyDRgdC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNCwINGBINC40L3RhNC+0YDQvNCw0YbQuNC10Lkg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxyXG4gIHNlbGVjdG9yUHJvZmlsZU5hbWUsXHJcbiAgc2VsZWN0b3JQcm9maWxlSm9iLFxyXG4gIHNlbGVjdG9yUHJvZmlsZUF2YXRhclxyXG4pO1xyXG5cclxuLy8g0YHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDQv9C+0L/QsNC/0LAg0YEg0YTQvtGA0LzQvtC5INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQsNC50LvQsFxyXG5jb25zdCBwb3B1cEZvcm1FZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3Jtcyh7XHJcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JQb3B1cEZvcm1FZGl0UHJvZmlsZSxcclxuICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0L/RgNCw0LLQutC4INGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNCw0LnQu9CwXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHVzZXJEYXRhKSA9PiB7XHJcbiAgICBwb3B1cEZvcm1FZGl0UHJvZmlsZS53YWl0TG9hZGluZygn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKTsgLy8g0LjQt9C80LXQvdC10L3QuNC1INGC0LXQutGB0YLQsCDQutC90L7Qv9C60Lgg0YHQsNCx0LzQuNGC0LAg0LLQviDQstGA0LXQvNGPINC+0YLQv9GA0LDQstC60Lgg0LTQsNC90L3Ri9GFINC90LAg0YHQtdGA0LLQtdGAXHJcbiAgICBhcGkudXBkYXRlVXNlckluZm8odXNlckRhdGEpXHJcbiAgICAgIC50aGVuKCgpID0+IHsgICAgICAgIFxyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTsgLy8g0LTQvtCx0LDQstC70LXQvdC40LUg0L/QvtC70YPRh9C10L3QvdGL0YUg0YEg0YHQtdGA0LLQtdGA0LAg0LTQsNC90L3Ri9GFINC90LAg0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBGb3JtRWRpdFByb2ZpbGUuY2xvc2UoKTsgLy8g0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LBcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHBvcHVwRm9ybUVkaXRQcm9maWxlLndhaXRMb2FkaW5nKCkpOyAvLyDQuNC30LzQtdC90LXQvdC40LUg0YLQtdC60YHRgtCwINC60L3QvtC/0LrQuCDRgdCw0LHQvNC40YLQsCDQvdCwINC40LfQvdCw0YfQsNC70YzQvdC+0LVcclxuICB9LFxyXG59KTtcclxuXHJcbi8vINGD0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70LXQuSDQtNC70Y8g0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cclxucG9wdXBGb3JtRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINGBINGE0L7RgNC80L7QuSDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LDQudC70LBcclxuY29uc3Qgb3BlblBvcHVwUHJvZmlsZUVkaXQgPSAoKSA9PiB7XHJcbiAgLy8g0L/QtdGA0LXQtNCw0YfQsCDQsiDQv9C+0LvRjyDRhNC+0YDQvNGLINC30L3QsNGH0LXQvdC40Lkg0LjQtyDQv9GA0L7RhNCw0LnQu9CwXHJcbiAgY29uc3QgaW5mb09iamVjdCA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gaW5mb09iamVjdC5wcm9maWxlTmFtZTtcclxuICBqb2JJbnB1dC52YWx1ZSA9IGluZm9PYmplY3QucHJvZmlsZUpvYjtcclxuXHJcbiAgcG9wdXBGb3JtRWRpdFByb2ZpbGUub3BlbigpOyAvLyDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsFxyXG59O1xyXG4vLyDRg9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9GPINC90LAg0LrQvdC+0L/QutGDINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQsNC50LvQsFxyXG5idG5FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG9wZW5Qb3B1cFByb2ZpbGVFZGl0KCk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vINGB0LHRgNC+0YEg0L7RiNC40LHQvtC6INGBINC40L3Qv9GD0YLQvtCyXHJcbn0pO1xyXG5cclxuLy8g0YHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDQv9C+0L/QsNC/0LAg0YEg0YTQvtGA0LzQvtC5INC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBwb3B1cEZvcm1BZGRDYXJ0ID0gbmV3IFBvcHVwV2l0aEZvcm1zKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvclBvcHVwRm9ybUFkZENhcmQsXHJcbiAgLy8g0L7QsdGA0LDQsdC+0YLRh9C40Log0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dERhdGEpID0+IHtcclxuICAgIHBvcHVwRm9ybUFkZENhcnQud2FpdExvYWRpbmcoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7IC8vINC40LfQvNC10L3QtdC90LjQtSDRgtC10LrRgdGC0LAg0LrQvdC+0L/QutC4INGB0LDQsdC80LjRgtCwINCy0L4g0LLRgNC10LzRjyDQvtGC0L/RgNCw0LLQutC4INC00LDQvdC90YvRhSDQvdCwINGB0LXRgNCy0LXRgFxyXG4gICAgYXBpLmFkZE5ld0NhcmQoaW5wdXREYXRhKVxyXG4gICAgICAudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQv9C+0LvRg9GH0LXQvdC90YvRhSDRgSDRgdC10YDQstC10YDQsCDQtNCw0L3QvdGL0YUg0L3QsCDRgdGC0YDQsNC90LjRhtGDXHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSByZW5kZXJDYXJkKGNhcmQpOyAvLyDQs9C10L3QtdGA0LDRhtC40Y8g0YDQsNC30LzQtdGC0LrQuCDQutCw0YDRgtC+0YfQutC4XHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7IC8vINC00L7QsdCw0LLQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0LIg0LrQvtC90YLQtdC50L3QtdGAXHJcbiAgICAgIHBvcHVwRm9ybUFkZENhcnQuY2xvc2UoKTsgLy8g0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LBcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHBvcHVwRm9ybUFkZENhcnQud2FpdExvYWRpbmcoKSk7IC8vINC40LfQvNC10L3QtdC90LjQtSDRgtC10LrRgdGC0LAg0LrQvdC+0L/QutC4INGB0LDQsdC80LjRgtCwINC90LAg0LjQt9C90LDRh9Cw0LvRjNC90L7QtVxyXG4gIH0sXHJcbn0pO1xyXG4vLyDRg9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9GPINC90LAg0L/QvtC/0LDQvyDRgSDRhNC+0YDQvNC+0Lkg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XHJcbnBvcHVwRm9ybUFkZENhcnQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINGBINGE0L7RgNC80L7QuSDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuY29uc3Qgb3BlblBvcHVwQWRkQ2FyZCA9ICgpID0+IHtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7IC8vINC00LXQu9Cw0LXQvCDQutC90L7Qv9C60YMg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQvdC10LDQutGC0LjQstC90L7QuSDQv9C10YDQtdC0INC+0YLQutGA0YvRgtC40LXQvCDQv9C+0L/QsNC/0LBcclxuICBwb3B1cEZvcm1BZGRDYXJ0Lm9wZW4oKTsgLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LBcclxufTtcclxuXHJcbi8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INC60L3QvtC/0LrQuCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmJ0bkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuUG9wdXBBZGRDYXJkKCk7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vINGB0LHRgNC+0YEg0L7RiNC40LHQvtC6INGBINC40L3Qv9GD0YLQvtCyXHJcbn0pO1xyXG5cclxuLy8g0YHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAg0L/QvtC/0LDQv9CwINGBINC40LfQvtCx0YDQsNC20LXQvdC40LXQvFxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvclBvcHVwV2l0aEltYWdlKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINGB0L7Qt9C00LDQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0LAg0L/QvtC/0LDQv9CwINGBINGE0L7RgNC80L7QuSDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNCwXHJcbmNvbnN0IHBvcHVwRm9ybUVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybXMoe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9yUG9wdXBGb3JtRWRpdEF2YXRhcixcclxuICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0L/RgNCw0LLQutC4INGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICBwb3B1cEZvcm1FZGl0QXZhdGFyLndhaXRMb2FkaW5nKCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpOyAvLyDQuNC30LzQtdC90LXQvdC40LUg0YLQtdC60YHRgtCwINC60L3QvtC/0LrQuCDRgdCw0LHQvNC40YLQsCDQstC+INCy0YDQtdC80Y8g0L7RgtC/0YDQsNCy0LrQuCDQtNCw0L3QvdGL0YUg0L3QsCDRgdC10YDQstC10YBcclxuICAgIGFwaS51cGRhdGVBdmF0YXIoZGF0YSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpOyAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQv9C+0LvRg9GH0LXQvdC90YvRhSDRgSDRgdC10YDQstC10YDQsCDQtNCw0L3QvdGL0YUg0L3QsCDRgdGC0YDQsNC90LjRhtGDXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBwb3B1cEZvcm1FZGl0QXZhdGFyLmNsb3NlKCk7IC8vINC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiBwb3B1cEZvcm1FZGl0QXZhdGFyLndhaXRMb2FkaW5nKCkpOyAvLyDQuNC30LzQtdC90LXQvdC40LUg0YLQtdC60YHRgtCwINC60L3QvtC/0LrQuCDRgdCw0LHQvNC40YLQsCDQvdCwINC40LfQvdCw0YfQsNC70YzQvdC+0LVcclxuICB9LFxyXG59KTtcclxuLy8g0YPRgdGC0LDQvdC+0LLQutCwINGB0LvRg9GI0LDRgtC10LvRjyDQvdCwINC/0L7Qv9Cw0L8g0YEg0YTQvtGA0LzQvtC5INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxucG9wdXBGb3JtRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQvdC+0L/QutC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuYnRuRWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwRm9ybUVkaXRBdmF0YXIub3BlbigpO1xyXG4gIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpIC8vINGB0LHRgNC+0YEg0L7RiNC40LHQvtC6INGBINC40L3Qv9GD0YLQvtCyXHJcbn0pO1xyXG5cclxuLy8g0YHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDQutC70LDRgdGB0LAg0L/QvtC/0LDQv9CwINGBINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNC10Lwg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IHBvcHVwV2l0aENvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9yUG9wdXBXaXRoQ29uZmlybWF0aW9uLFxyXG4gIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChjYXJkKSA9PiB7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLmNhcmRJZCkgLy8g0L/QtdGA0LXQtNCw0YfQsCBJZCDQutCw0YDRgtC+0YfQutC4INCyINC80LXRgtC+0LQg0YPQtNCw0LvQtdC90LjRj1xyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5jYXJkRWxlbWVudC5yZW1vdmUoKTsgLy8g0YPQtNCw0LvQtdC90LjQtSDRgNCw0LfQvNC10YLQutC4INC60LDRgNGC0L7Rh9C60Lgg0YHQviDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICAgICAgY2FyZCA9IG51bGw7XHJcbiAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmNsb3NlKClcclxuICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSkgICBcclxuICB9XHJcbn0pO1xyXG5wb3B1cFdpdGhDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINGB0L7Qt9C00LDQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0LAg0LLQsNC70LjQtNCw0YLQvtGA0LAg0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LDQudC70LBcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1Qcm9maWxlRWRpdCk7XHJcbi8vINGB0L7Qt9C00LDQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0LAg0LLQsNC70LjQtNCw0YLQvtGA0LAg0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNCwXHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtQXZhdGFyRWRpdClcclxuLy8g0YHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDQstCw0LvQuNC00LDRgtC+0YDQsCDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUFkZENhcmQpO1xyXG5cclxuLy8g0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7Il0sIm5hbWVzIjpbIkNhcmQiLCJzZWxlY3RvclRlbXBsYXRlIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVRyYXNoQnV0dG9uIiwiaGFuZGxlTGlrZUJ1dHRvbiIsInRoaXMiLCJjYXJkSWQiLCJfaWQiLCJfdXNlcklkIiwidXNlcklkIiwiX2NhcmRPd25lcklkIiwib3duZXIiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXNBcnJheSIsImxpa2VzIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfc2VsZWN0b3JUZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlVHJhc2hCdXR0b24iLCJfaXNPd25lciIsImNhcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidHJhc2giLCJyZW1vdmVDaGlsZCIsIl9idG5MaWtlIiwiY2FyZEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2J0blRyYXNoIiwiX2NhcmRJbWFnZSIsInNvbWUiLCJsaWtlVXNlcnMiLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZGF0YUxpa2VzIiwiX2xpa2VzQW1vdW50IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfdG9nZ2xlTGlrZUJ1dHRvbiIsInNyYyIsImFsdCIsIl9jaGVja093bmVyIiwiX2dldFRlbXBsYXRlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9zZXREYXRhIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNhcmRzIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiVXNlckluZm8iLCJzZWxlY3RvclByb2ZpbGVOYW1lIiwic2VsZWN0b3JQcm9maWxlSm9iIiwic2VsZWN0b3JQcm9maWxlQXZhdGFyIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJfcHJvZmlsZUF2YXRhciIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsImFib3V0IiwiYXZhdGFyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlQmluZCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJldnQiLCJrZXkiLCJjbG9zZSIsIm92ZXJsYXkiLCJ0YXJnZXQiLCJjb250YWlucyIsImJ1dHRvbkNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm1zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbkRlZmF1bHRUZXh0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiVGV4dEJ1dHRvbiIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltZyIsIl9wb3B1cFRpdGxlIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX2NhcmQiLCJBcGkiLCJ1cmwiLCJoZWFkZXJzIiwiX3VybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9oYW5kbGVSZXNwb25zZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2VsZWN0b3JQb3B1cEZvcm1FZGl0UHJvZmlsZSIsInNlbGVjdG9yUG9wdXBGb3JtQWRkQ2FyZCIsInNlbGVjdG9yUG9wdXBGb3JtRWRpdEF2YXRhciIsInBhZ2UiLCJidG5FZGl0UHJvZmlsZSIsImJ0bkFkZENhcmQiLCJidG5FZGl0QXZhdGFyIiwiZm9ybVByb2ZpbGVFZGl0IiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJmb3JtQXZhdGFyRWRpdCIsImZvcm1BZGRDYXJkIiwiZm9ybVNlbGVjdG9yIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiaW5pdGlhbENhcmRzIiwidXNlckRhdGEiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2FyZExpc3QiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJyZW5kZXJDYXJkIiwiY2FyZERhdGEiLCJwb3B1cFdpdGhJbWFnZSIsIm9wZW4iLCJwb3B1cFdpdGhDb25maXJtYXRpb24iLCJkZWxldGVMaWtlQ2FyZCIsInNldExpa2VzIiwiYWRkTGlrZUNhcmQiLCJjcmVhdGVDYXJkIiwibmV3Q2FyZCIsImFkZEl0ZW0iLCJwb3B1cEZvcm1FZGl0UHJvZmlsZSIsIndhaXRMb2FkaW5nIiwidXBkYXRlVXNlckluZm8iLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJpbmZvT2JqZWN0IiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cEZvcm1BZGRDYXJ0IiwiaW5wdXREYXRhIiwiYWRkTmV3Q2FyZCIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwicG9wdXBGb3JtRWRpdEF2YXRhciIsInVwZGF0ZUF2YXRhciIsImVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yIiwiZGVsZXRlQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9